<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Inheritability â€“ Home</title>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch("base.html")
                .then(res => res.text())
                .then(base => {
                    document.open();
                    document.write(base);
                    document.close();

                    // Load API content after base loads
                    setTimeout(loadSections, 300);
                });
        });

        // Your API base URL
        const API_BASE = "https://YOURUSERNAME.pythonanywhere.com/api/";

        function loadSections() {
            const container = document.getElementById("content");

            // SECTION 1: directory buttons / categories
            fetch(API_BASE + "sections/")
                .then(r => r.json())
                .then(sections => {
                    sections.forEach(sec => {
                        container.innerHTML += `
                        <div class="section" id="section-${sec.id}">
                            <h2 class="section-title">${sec.title}</h2>
                            <div>${sec.content}</div>
                        </div>`;
                    });
                });

            // Featured banners
            fetch(API_BASE + "banners/")
                .then(r => r.json())
                .then(banners => {
                    banners.forEach(b => {
                        container.innerHTML += `
                        <div class="section" style="background:${b.color};">
                            <h2>${b.name}</h2>
                            <img src="${b.photo}" style="max-width:100%; border-radius:8px;">
                            <p>${b.description}</p>
                        </div>`;
                    });
                });

            // Updates / posts
            fetch(API_BASE + "updates/")
                .then(r => r.json())
                .then(updates => {
                    updates.forEach(up => {
                        container.innerHTML += `
                        <div class="section">
                            <h2 class="section-title">${up.title}</h2>
                            <p>${up.body}</p>
                            <small>Posted: ${up.created_at}</small>
                        </div>`;
                    });
                });
        }
    </script>
</head>
<body></body>
</html>
